{% comment %}
  Shoutbox CTA Section â€” Dawn
{% endcomment %}

{% style %}
  .shoutbox-cta {
    padding: 2rem 0;
  }
  .shoutbox-cta__inner {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    text-align: center;
  }
  .shoutbox-cta .button {
    margin-top: 1rem;
  }
{% endstyle %}

{% assign show_section = true %}

{%- case section.settings.display_condition -%}
  {%- when 'only_not_customer' -%}
    {% if customer %}
      {% assign show_section = false %}
    {% endif %}
  {%- when 'only_cart_empty' -%}
    {% if cart.item_count > 0 %}
      {% assign show_section = false %}
    {% endif %}
{%- endcase -%}

{% if show_section %}
  <section class="shoutbox-cta" style="background-color: {{ section.settings.bg_color }};">
    <div class="shoutbox-cta__inner page-width">
      {%- if section.settings.heading_text != blank -%}
        <{{ section.settings.heading_tag }} class="{{ section.settings.header_style }}">
          {{ section.settings.heading_text }}
        </{{ section.settings.heading_tag }}>
      {%- endif -%}

      {%- if section.settings.content != blank -%}
        <div class="shoutbox-cta__content rte">
          {{ section.settings.content }}
        </div>
      {%- endif -%}

      {%- if section.settings.button_label != blank and section.settings.button_url != blank -%}
        <a
          href="{{ section.settings.button_url }}"
          {% if section.settings.button_target %}
            target="_blank" rel="noopener"
          {% endif %}
          class="button {{ section.settings.button_style }} {{ section.settings.button_width }}"
        >
          {{ section.settings.button_label }}
        </a>
      {%- endif -%}
    </div>
  </section>
{% endif %}

{% schema %}
{
  "name": "Shoutbox CTA",
  "settings": [
    {
      "type": "text",
      "id": "heading_text",
      "label": "Heading"
    },
    {
      "type": "select",
      "id": "heading_tag",
      "label": "Heading Tag",
      "options": [
        { "value": "h1", "label": "h1" },
        { "value": "h2", "label": "h2" },
        { "value": "h3", "label": "h3" },
        { "value": "h4", "label": "h4" },
        { "value": "h5", "label": "h5" },
        { "value": "h6", "label": "h6" },
        { "value": "p", "label": "p" }
      ],
      "default": "h2"
    },
    {
      "type": "select",
      "id": "header_style",
      "label": "Header Style",
      "options": [
        { "value": "h1", "label": "h1" },
        { "value": "h2", "label": "h2" },
        { "value": "h3", "label": "h3" },
        { "value": "h4", "label": "h4" },
        { "value": "h5", "label": "h5" },
        { "value": "h6", "label": "h6" },
        { "value": "p", "label": "p" }
      ],
      "default": "h2"
    },
    {
      "type": "richtext",
      "id": "content",
      "label": "Content"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button Label"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button URL"
    },
    {
      "type": "checkbox",
      "id": "button_target",
      "label": "Open in new tab"
    },
    {
      "type": "select",
      "id": "button_style",
      "label": "Button Style",
      "options": [
        { "value": "primary-cta", "label": "Primary CTA" },
        { "value": "secondary-cta", "label": "Secondary CTA" }
      ],
      "default": "primary-cta"
    },
    {
      "type": "select",
      "id": "button_width",
      "label": "Button Width",
      "options": [
        { "value": "cta-width-small", "label": "Small" },
        { "value": "cta-width-medium", "label": "Medium" },
        { "value": "cta-width-large", "label": "Large" },
        { "value": "cta-width-auto", "label": "Auto" }
      ],
      "default": "cta-width-auto"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "select",
      "id": "display_condition",
      "label": "Display Condition",
      "options": [
        { "value": "always", "label": "Always show" },
        { "value": "only_not_customer", "label": "Only show if not customer" },
        { "value": "only_cart_empty", "label": "Only show if cart is empty" }
      ],
      "default": "always"
    }
  ],
  "presets": [
    {
      "name": "Shoutbox CTA",
      "category": "Custom"
    }
  ]
}
{% endschema %}
